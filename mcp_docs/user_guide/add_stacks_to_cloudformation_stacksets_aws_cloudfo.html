<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Add stacks to CloudFormation StackSets - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="stackinstances-create" /><meta name="default_state" content="stackinstances-create" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="description" content="Learn how to add stacks to StackSets using either the CloudFormation console or the AWS CLI." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Add stacks to CloudFormation StackSets" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Add stacks to CloudFormation StackSets - AWS CloudFormation</title><meta name="pdf" content="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#stackinstances-create" /><meta name="rss" content="aws-cloudformation-user-guide-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Managing stacks across accounts and Regions with StackSets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Add stacks to CloudFormation StackSets",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#stackinstances-create" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#stackinstances-create-console">Add stacks to a StackSet
                    (console)</a><a href="#stackinstances-create-cli">Add stacks to a StackSet (AWS CLI)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="stackinstances-create">Add stacks to CloudFormation StackSets</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When you create a StackSet, you can create the stacks for that StackSet. CloudFormation also
            enables you to add more stacks, for additional accounts and Regions, at any point after
            the StackSet is created. You can add stacks using either the CloudFormation console or the
            AWS CLI.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><p><a href="#stackinstances-create-console">Add stacks to a StackSet
                    (console)</a></p></li><li><p><a href="#stackinstances-create-cli">Add stacks to a StackSet (AWS CLI)</a></p></li></ul></div>
            <h2 id="stackinstances-create-console">Add stacks to a StackSet
                    (console)</h2>

            <div class="procedure"><h6>To add stacks to a StackSet</h6><ol><li><p>Sign in to the AWS Management Console and open the AWS CloudFormation console at
         <a href="https://console.aws.amazon.com/cloudformation/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudformation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                    <p>On the navigation bar at the top of the screen, choose the AWS Region
                        you created the StackSet in.</p>
                </li><li>
                    <p>From the navigation pane, choose <b>StackSets</b>. On the
                        StackSets page, select the StackSet that you created.</p>
                </li><li>
                    <p>With the StackSet selected, choose <b>Add stacks to StackSet</b>
                        from the <b>Actions</b> menu.</p>
                </li><li>
                    <p>On the <b>Set deployment options</b> page, do the
                        following:</p>
                    <ol><li>
                            <p>For <b>Add stacks to StackSet</b>, choose
                                    <b>Deploy new stacks</b>.</p>
                        </li><li>
                            <p>Next, do the following depending on your StackSet's permissions
                                configuration:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>[Self-managed permissions] For
                                            <b>Accounts</b>, <b>Deployment
                                            locations</b>, choose <b>Deploy stacks in
                                            accounts</b>. Paste your target account numbers
                                        in the text box, separating multiple numbers with
                                        commas.</p>
                                </li><li class="listitem">
                                    <p>[Service-managed permissions] For <b>Deployment
                                            targets</b>, do one of the following:</p>
                                    <div class="itemizedlist">
                                         
                                         
                                    <ul class="itemizedlist"><li class="listitem">
                                            <p>Choose <b>Deploy to organization</b>
                                                to deploy to all accounts in your
                                                organization.</p>
                                        </li><li class="listitem">
                                            <p>Choose <b>Deploy to organizational units
                                                  (OUs)</b> to deploy to all accounts in
                                                specific OUs. Choose <b>Add another
                                                  OU</b>, and then paste the target OU ID in
                                                the text box. Repeat for each new target OU.
                                                CloudFormation also targets any child OUs of your
                                                selected targets.</p>
                                        </li></ul></div>
                                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you add an OU that your StackSet already targets,
                                            CloudFormation creates new stacks in any accounts in the OU
                                            that don't already have stacks from your StackSet (for
                                            example, accounts that were added to the OU after your
                                            StackSet was created and with automatic deployments
                                            disabled).</p></div></div>
                                </li></ul></div>
                        </li><li>
                            <p>For <b>Specify regions</b>, specify which
                                AWS Regions to deploy to in the target accounts you specified in
                                the previous step. By default, CloudFormation will deploy stacks in the
                                specified accounts within the first Region, then moves on to the
                                next, and so on, as long as a Region's deployment failures don't
                                exceed a specified failure tolerance.</p>
                        </li><li>
                            <p>For <b>Deployment options</b>, do the
                                following:</p>
                            <div class="itemizedlist">
                                 
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>For <b>Maximum concurrent accounts</b>,
                                        specify how many accounts are processed concurrently.</p>
                                </li><li class="listitem">
                                    <p>For <b>Failure tolerance</b>, specify the
                                        maximum number of account failures allowed per Region. The
                                        operation will stop and won't proceed to other Regions once
                                        this limit is reached.</p>
                                </li><li class="listitem">
                                    <p>For <b>Region concurrency</b>, choose how to
                                        process Regions: <b>Sequential</b> (one Region
                                        at a time) or <b>Parallel</b> (multiple
                                        Regions concurrently).</p>
                                </li><li class="listitem">
                                    <p>For <b>Concurrency mode</b>, choose how
                                        concurrency behaves during operation execution.</p>
                                    <div class="itemizedlist">
                                         
                                         
                                    <ul class="itemizedlist"><li class="listitem">
                                            <p><b>Strict failure tolerance</b>
                                                â Reduces account concurrency level when
                                                failures occur, staying within <b>Failure
                                                  tolerance</b> +1.</p>
                                        </li><li class="listitem">
                                            <p><b>Soft failure tolerance</b>
                                                â Maintains your specified concurrency level
                                                (the value of <b>Maximum concurrent
                                                  accounts</b>) regardless of failures.
                                            </p>
                                        </li></ul></div>
                                </li></ul></div>
                        </li><li>
                            <p>Choose <b>Next</b>.</p>
                        </li></ol>
                </li><li>
                    <p>On the <b>Specify Overrides</b> page, leave the property
                        values as specified. You won't be overriding any property values for the
                        stacks you're going to create. Choose <b>Next</b>.</p>
                </li><li>
                    <p>On the <b>Review</b> page, review your choices. To make
                        changes, choose <b>Edit</b> on the related section.</p>
                </li><li>
                    <p>When you're ready to proceed, choose <b>Submit</b>.</p>
                    <p>CloudFormation starts creating your stacks. View the progress and status of
                        the creation of the stacks in your StackSet in the StackSet details page that opens
                        when you choose <b>Submit</b>. When complete, your new stacks
                        should be listed on the <b>Stack instances</b> tab.</p>
                </li></ol></div>
         
            <h2 id="stackinstances-create-cli">Add stacks to a StackSet (AWS CLI)</h2>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When acting as a delegated administrator, you must include <code class="code">--call-as
                        DELEGATED_ADMIN</code> in the command. </p></div></div>
             
                <h6>To add stacks to a StackSet with self-managed permissions</h6>
                <p>Use the <b>create-stack-instances</b> CLI command. For the
                        <code class="code">--accounts</code> option, provide the accounts IDs for which you want
                    to create stacks.</p>
             
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation create-stack-instances --stack-set-name <code class="replaceable">my-stackset</code> \
  --accounts <code class="replaceable">account_id</code> --regions <code class="replaceable">eu-west-1 us-west-2</code></code></pre>
             
                <h6>To add stacks to a StackSet with service-managed permissions</h6>
                <p>Use the <b>create-stack-instances</b> CLI command. For the
                        <code class="code">--deployment-targets</code> option, provide the organization (root) ID
                    or OU IDs for which you want to create stacks. For example commands that target
                    specific accounts, see <a href="./stacksets-orgs-associate-stackset-with-org.html#stacksets-orgs-associate-stackset-with-org-cli">Create a StackSet with
                    service-managed permissions (AWS CLI)</a>.</p>
             
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation create-stack-instances --stack-set-name <code class="replaceable">my-stackset</code> \
  --deployment-targets OrganizationalUnitIds=<code class="replaceable">ou-rcuk-r1qi0wl7</code> --regions <code class="replaceable">eu-west-1 us-west-2</code></code></pre>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you add an OU that your StackSet already targets, CloudFormation creates new stacks
                    in any accounts in the OU that don't already have stacks from your StackSet (for
                    example, accounts that were added to the OU after your StackSet was created and with
                    automatic deployments disabled).</p></div></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./stacksets-update.html">Update StackSets</div><div id="next" class="next-link" accesskey="n" href="./stackinstances-override.html">Override parameters on
                stacks</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/stackinstances-create.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>