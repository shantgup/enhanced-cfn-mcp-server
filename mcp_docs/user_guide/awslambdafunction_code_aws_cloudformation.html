<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-code.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::Lambda::Function Code - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-properties-lambda-function-code" /><meta name="default_state" content="aws-properties-lambda-function-code" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" /><meta name="description" content="Changes to a deployment package in Amazon S3 or a container image in ECR are not detected automatically during stack updates. To update the function code, change the object key or version in the template." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="Template Reference" /><meta name="abstract" content="Describes the resource types, resource properties, resource attributes, intrinsic functions, and transforms that you can use in CloudFormation templates." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_Lambda.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="Template Reference" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="Template Reference" /><meta id="panorama-serviceConsolePage" value="AWS::Lambda::Function Code" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::Lambda::Function Code - AWS CloudFormation</title><meta name="rss" content="aws-cloudformation-template-reference-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,CloudFormation template reference" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Template Reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Lambda resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/AWS_Lambda.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::Lambda::Function",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-lambda-function.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "AWS::Lambda::Function Code",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-lambda-function.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_Lambda.html">Template Reference</a></div><div id="page-toc-src"><a href="#aws-properties-lambda-function-code-syntax">Syntax</a><a href="#aws-properties-lambda-function-code-properties">Properties</a><a href="#aws-properties-lambda-function-code--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>This is the new <em>AWS CloudFormation Template Reference Guide</em>.
         Please update your bookmarks and links. For help getting started with CloudFormation, see the
            <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">AWS CloudFormation User Guide</a>.</p></awsui-alert><h1 class="topictitle" id="aws-properties-lambda-function-code">AWS::Lambda::Function Code</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-package.html">deployment package</a>
      for a Lambda function. To deploy a function defined as a container image,
      you specify the location of a container image in the Amazon ECR registry.
      For a .zip file deployment package, you can specify the location of an object in
      Amazon S3. For Node.js and Python functions, you can specify the function code inline
      in the template.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you specify source code inline for a Node.js function, the <code class="code">index</code> file that  AWS CloudFormation creates uses the extension 
            <code class="code">.js</code>. This means that Lambda treats the file as a CommonJS module. ES modules aren't supported for 
            inline functions.</p></div></div><p>Changes to a deployment package in Amazon S3 or a container image in ECR are not
      detected automatically during stack updates. To update the function code, change the
      object key or version in the template.</p><h2 id="aws-properties-lambda-function-code-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-properties-lambda-function-code-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
  "<a href="#cfn-lambda-function-code-imageuri">ImageUri</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-lambda-function-code-s3bucket">S3Bucket</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-lambda-function-code-s3key">S3Key</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-lambda-function-code-s3objectversion">S3ObjectVersion</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-lambda-function-code-sourcekmskeyarn">SourceKMSKeyArn</a>" : <code class="replaceable">String</code>,
  "<a href="#cfn-lambda-function-code-zipfile">ZipFile</a>" : <code class="replaceable">String</code>
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-properties-lambda-function-code-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">  <a href="#cfn-lambda-function-code-imageuri">ImageUri</a>: <code class="replaceable">String</code>
  <a href="#cfn-lambda-function-code-s3bucket">S3Bucket</a>: <code class="replaceable">String</code>
  <a href="#cfn-lambda-function-code-s3key">S3Key</a>: <code class="replaceable">String</code>
  <a href="#cfn-lambda-function-code-s3objectversion">S3ObjectVersion</a>: <code class="replaceable">String</code>
  <a href="#cfn-lambda-function-code-sourcekmskeyarn">SourceKMSKeyArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-lambda-function-code-zipfile">ZipFile</a>: <code class="replaceable">String</code>
</code></pre></div><h2 id="aws-properties-lambda-function-code-properties">Properties</h2><div class="variablelist"><dl><dt id="cfn-lambda-function-code-imageuri"><span class="term"><code class="code">ImageUri</code></span></dt><dd>
                    <p>URI of a <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-images.html">container image</a> in the
        Amazon ECR registry.</p>
                <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-lambda-function-code-s3bucket"><span class="term"><code class="code">S3Bucket</code></span></dt><dd>
                    <p>An Amazon S3 bucket in the same AWS Region as your function. The bucket can be in a different AWS account.</p>
                <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^[0-9A-Za-z\.\-_]*(?&lt;!\.)$</code></p><p><em>Minimum</em>: <code class="code">3</code></p><p><em>Maximum</em>: <code class="code">63</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-lambda-function-code-s3key"><span class="term"><code class="code">S3Key</code></span></dt><dd>
                    <p>The Amazon S3 key of the deployment package.</p>
                <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">1024</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-lambda-function-code-s3objectversion"><span class="term"><code class="code">S3ObjectVersion</code></span></dt><dd>
                    <p>For versioned objects, the version of the deployment package object to use.</p>
                <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">1024</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-lambda-function-code-sourcekmskeyarn"><span class="term"><code class="code">SourceKMSKeyArn</code></span></dt><dd>
                    <p>The ARN of the AWS Key Management Service (AWS KMS) customer managed key that's used to encrypt your function's 
.zip deployment package. If you don't provide a customer managed key, Lambda uses an <a href="https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#aws-owned-cmk">AWS owned key</a>.</p>
                <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Pattern</em>: <code class="code">^(arn:(aws[a-zA-Z-]*)?:[a-z0-9-.]+:.*)|()$</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt id="cfn-lambda-function-code-zipfile"><span class="term"><code class="code">ZipFile</code></span></dt><dd>
                    <p>(Node.js and Python) The source code of your Lambda function. If you include your function source inline with
      this parameter, AWS CloudFormation places it in a file named <code class="code">index</code> and zips it to create a 
      <a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-package.html">deployment package</a>. 
      This zip file cannot exceed 4MB. For the <code class="code">Handler</code> property, the first part of the handler identifier must be
      <code class="code">index</code>. For example, <code class="code">index.handler</code>.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you specify source code inline for a Node.js function, the <code class="code">index</code> file that  AWS CloudFormation creates uses the extension 
         <code class="code">.js</code>. This means that Lambda treats the file as a CommonJS module. ES modules aren't supported for 
         inline functions.</p></div></div>
                    <p> For JSON, you must escape quotes and special characters such as newline (<code class="code">\n</code>) with a backslash.</p>
                    <p>If you specify a function that interacts with an AWS CloudFormation custom resource, you don't have to write
      your own functions to send responses to the custom resource that invoked the function. AWS CloudFormation provides
      a response module (<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-lambda-function-code-cfnresponsemodule.html">cfn-response</a>)
      that simplifies sending responses. See <a href="https://docs.aws.amazon.com/lambda/latest/dg/services-cloudformation.html">Using AWS Lambda with AWS CloudFormation</a> for
      details. </p>
                <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-properties-lambda-function-code--examples">Examples</h2>
            <h3 id="aws-properties-lambda-function-code--examples--Inline_Function">Inline Function</h3><p>Inline Node.js function that lists Amazon S3 buckets in <code class="code">
                            us-east-1
                        </code>. This example uses the <a href="https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/welcome.html">AWS SDK for JavaScript v3</a>, which is available in the <code class="code">nodejs18.x</code> runtime. Before using this example, make sure that your function's execution role has Amazon S3 read permissions.</p><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-properties-lambda-function-code--examples--Inline_Function--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">      Code:
        ZipFile: |
          const <span>{</span> S3Client, ListBucketsCommand } = require("@aws-sdk/client-s3");
          const s3 = new S3Client(<span>{</span> region: "us-east-1" }); // replace "us-east-1" with your AWS Region

          exports.handler = async function(event) <span>{</span>
            const command = new ListBucketsCommand(<span>{</span>});
            const response = await s3.send(command);
            return response.Buckets;
          };</code></pre></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-resource-lambda-function.html">AWS::Lambda::Function</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-lambda-function-deadletterconfig.html">DeadLetterConfig</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/TemplateReference/aws-properties-lambda-function-code.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>