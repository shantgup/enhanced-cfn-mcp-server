<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CloudFormation best practices - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="best-practices" /><meta name="default_state" content="best-practices" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="description" content="Guidelines and recommendations on how to use CloudFormation more effectively and securely." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="CloudFormation best practices" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>CloudFormation best practices - AWS CloudFormation</title><meta name="pdf" content="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#best-practices" /><meta name="rss" content="aws-cloudformation-user-guide-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/best-practices.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "CloudFormation best practices",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#best-practices" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#shortenfeedbackloop">Shorten the feedback loop to improve delivery
        velocity</a><a href="#organizingstacks">Organize your stacks by lifecycle and ownership</a><a href="#cross-stack">Use cross-stack references to export shared resources</a><a href="#limits">Verify quotas for all resource types</a><a href="#reuse">Reuse templates to replicate stacks in multiple environments</a><a href="#modules-reuse">Use modules to reuse resource configurations</a><a href="#parmtypes">Use AWS-specific parameter types</a><a href="#parmconstraints">Use parameter constraints</a><a href="#pseudoparameters">Use pseudo parameters to promote portability</a><a href="#cfninit">Use AWS::CloudFormation::Init to deploy software
        applications on Amazon EC2 instances</a><a href="#helper-scripts">Use the latest helper scripts</a><a href="#validate">Validate templates before using them</a><a href="#donttouch">Manage all stack resources through CloudFormation</a><a href="#cfn-best-practices-changesets">Create change sets before updating your
        stacks</a><a href="#stackpolicy">Use stack policies</a><a href="#code">Use code reviews and revision controls to manage your templates</a><a href="#update-ec2-linux">Update your Amazon EC2 instances regularly</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="best-practices">CloudFormation best practices</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Best practices are recommendations that can help you use CloudFormation more effectively and
    securely throughout its entire workflow. Learn how to plan and organize your stacks, create
    templates that describe your resources and the software applications that run on them, and
    manage your stacks and their resources. The following best practices are based on real-world
    experience from current CloudFormation customers.</p><div class="variablelist">
     
     
     
  <dl>
      <dt><b><span class="term">Planning and organizing</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="#shortenfeedbackloop">Shorten the feedback loop to improve delivery
        velocity</a></p>
          </li><li class="listitem">
            <p><a href="#organizingstacks">Organize your stacks by lifecycle and ownership</a></p>
          </li><li class="listitem">
            <p><a href="#cross-stack">Use cross-stack references to export shared resources</a></p>
          </li><li class="listitem">
            <p><a href="./security-best-practices.html#use-iam-to-control-access">Use IAM to control access</a></p>
          </li><li class="listitem">
            <p><a href="#reuse">Reuse templates to replicate stacks in multiple environments</a></p>
          </li><li class="listitem">
            <p><a href="#limits">Verify quotas for all resource types</a>
            </p>
          </li><li class="listitem">
            <p><a href="#modules-reuse">Use modules to reuse resource configurations</a></p>
          </li></ul></div>
      </dd>
    
      <dt><b><span class="term">Creating templates</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="./security-best-practices.html#creds">Do not embed credentials in your templates</a></p>
          </li><li class="listitem">
            <p><a href="#parmtypes">Use AWS-specific parameter types</a></p>
          </li><li class="listitem">
            <p><a href="#parmconstraints">Use parameter constraints</a></p>
          </li><li class="listitem">
            <p><a href="#pseudoparameters">Use pseudo parameters to promote portability</a></p>
          </li><li class="listitem">
            <p><a href="#cfninit">Use AWS::CloudFormation::Init to deploy software
        applications on Amazon EC2 instances</a></p>
          </li><li class="listitem">
            <p><a href="#helper-scripts">Use the latest helper scripts</a></p>
          </li><li class="listitem">
            <p><a href="#validate">Validate templates before using them</a></p>
          </li></ul></div>
      </dd>
    
      <dt><b><span class="term">Managing stacks</span></b></dt>
      <dd>
        <div class="itemizedlist">
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="#donttouch">Manage all stack resources through CloudFormation</a></p>
          </li><li class="listitem">
            <p><a href="#cfn-best-practices-changesets">Create change sets before updating your
        stacks</a></p>
          </li><li class="listitem">
            <p><a href="#stackpolicy">Use stack policies</a></p>
          </li><li class="listitem">
            <p><a href="./security-best-practices.html#cloudtrail">Use AWS CloudTrail to log CloudFormation calls</a></p>
          </li><li class="listitem">
            <p><a href="#code">Use code reviews and revision controls to manage your templates</a></p>
          </li><li class="listitem">
            <p><a href="#update-ec2-linux">Update your Amazon EC2 instances regularly</a></p>
          </li></ul></div>
      </dd>
    </dl></div>
    <h2 id="shortenfeedbackloop">Shorten the feedback loop to improve delivery
        velocity</h2>

    <p>Adopt practices and tools that help you shorten the feedback loop for your infrastructure
      you describe with CloudFormation templates. This includes performing early linting and testing of
      your templates in your workstation; when you do, you have the opportunity to discover
      potential syntax and configuration issues even before you submit your contributions to a
      source code repository. Early discovery of such issues helps with preventing them from
      reaching formal lifecycle environments, such as development, quality assurance, and
      production. This early-testing, fail-fast approach gives you the benefits of reducing rework
      wait time, reducing potential areas of impact, and increasing your level of confidence in
      having successful provisioning operations.</p>
    <p>Tooling choices that help you achieve fail-fast practices include the <a href="https://github.com/aws-cloudformation/cfn-lint" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation Linter</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
        (<code class="code">cfn-lint</code>) and <a href="https://github.com/aws-ia/taskcat" rel="noopener noreferrer" target="_blank"><span>TaskCat</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
      command line tools. The <code class="code">cfn-lint</code> tool gives you the ability to validate your
      CloudFormation templates against the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/cfn-resource-specification.html">AWS CloudFormation Resource Specification</a>. This
      includes checking valid values for resource properties, as well as best practices. Plugins for
        <code class="code">cfn-lint</code> are <a href="https://github.com/aws-cloudformation/cfn-lint#editor-plugins" rel="noopener noreferrer" target="_blank"><span>available for a number
        of code editors</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>; this gives you the ability to visualize issues within your editor
      and to get direct linter feedback. You can also choose to integrate <code class="code">cfn-lint</code> in
      your source code repositoryâs configuration, so that you can perform template validation when
      you commit your contributions. For more information, see <a href="https://aws.amazon.com/blogs/mt/git-pre-commit-validation-of-aws-cloudformation-templates-with-cfn-lint/" rel="noopener noreferrer" target="_blank"><span>Git pre-commit validation of AWS CloudFormation templates with <code class="code">cfn-lint</code></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Once you
      have performed your initial lintingâand fixed any issues <code class="code">cfn-lint</code> might have
      raisedâyou can use TaskCat to test your templates by programmatically creating stacks in the
      AWS Regions you choose. TaskCat also generates a report with a pass/fail grades for each
      Region you chose.</p>
    <p>For a step-by-step, hands-on walkthrough on how to use both tools to shorten the feedback
      loop, follow the <a href="https://catalog.workshops.aws/cfn101/en-US/basics/templates/linting-and-testing" rel="noopener noreferrer" target="_blank"><span>Linting and Testing lab</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the <a href="https://catalog.workshops.aws/cfn101/en-US" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation Workshop</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
   
    <h2 id="organizingstacks">Organize your stacks by lifecycle and ownership</h2>

    <p>Use the lifecycle and ownership of your AWS resources to help you decide what resources
      should go in each stack. Initially, you might put all your resources in one stack, but as your
      stack grows in scale and broadens in scope, managing a single stack can be cumbersome and time
      consuming. By grouping resources with common lifecycles and ownership, owners can make changes
      to their set of resources by using their own process and schedule without affecting other
      resources.</p>
    <p>For example, imagine a team of developers and engineers who own a website that's hosted on
      Amazon EC2 Auto Scaling instances behind a load balancer. Because the website has its own lifecycle and is
      maintained by the website team, you can create a stack for the website and its resources. Now
      imagine that the website also uses back-end databases, where the databases are in a separate
      stack that are owned and maintained by database administrators. Whenever the website team or
      database team needs to update their resources, they can do so without affecting each other's
      stack. If all resources were in a single stack, coordinating, and communicating updates can be
      difficult.</p>
    <p>For additional guidance about organizing your stacks, you can use two common frameworks: a
      multi-layered architecture and service-oriented architecture (SOA).</p>
    <p>A layered architecture organizes stacks into multiple horizontal layers that build on top
      of one another, where each layer has a dependency on the layer directly below it. You can have
      one or more stacks in each layer, but within each layer, your stacks should have AWS
      resources with similar lifecycles and ownership.</p>
    <p>With a service-oriented architecture, you can organize big business problems into
      manageable parts. Each of these parts is a service that has a clearly defined purpose and
      represents a self-contained unit of functionality. You can map these services to a stack,
      where each stack has its own lifecycle and owners. These services (stacks) can be wired
      together so that they can interact with one another.</p>
   
    <h2 id="cross-stack">Use cross-stack references to export shared resources</h2>

    <p>When you organize your AWS resources based on lifecycle and ownership, you might want to
      build a stack that uses resources that are in another stack. You can hardcode values or use
      input parameters to pass resource names and IDs. However, these methods can make templates
      difficult to reuse or can increase the overhead to get a stack running. Instead, use
      cross-stack references to export resources from a stack so that other stacks can use them.
      Stacks can use the exported resources by calling them using the <code class="code">Fn::ImportValue</code>
      function.</p>
    <p>For example, you might have a network stack that includes a VPC, a security group, and a
      subnet. You want all public web applications to use these resources. By exporting the
      resources, you allow all stacks with public web applications to use them. For more
      information, see <a href="./using-cfn-stack-exports.html">Get exported outputs from a deployed CloudFormation
      stack</a>.</p>
   
    <h2 id="limits">Verify quotas for all resource types</h2>

    <p>Before launching a stack, ensure that you can create all the resources that you want
      without hitting your AWS account limits. If you hit a limit, CloudFormation won't create your
      stack successfully until you increase your quota or delete extra resources. Each service can
      have various limits that you should be aware of before launching a stack. For example, by
      default, you can only launch 2000 CloudFormation stacks per Region in your AWS account. For more
      information about limits and how to increase the default limits, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html">AWS service quotas</a> in the
        <em>AWS General Reference</em>.</p>
   
    <h2 id="reuse">Reuse templates to replicate stacks in multiple environments</h2>

    <p>After you have your stacks and resources set up, you can reuse your templates to replicate
      your infrastructure in multiple environments. For example, you can create environments for
      development, testing, and production so that you can test changes before implementing them
      into production. To make templates reusable, use the parameters, mappings, and conditions
      sections so that you can customize your stacks when you create them. For example, for your
      development environments, you can specify a lower-cost instance type compared to your
      production environment, but all other configurations and settings remain the same. For more
      information about parameters, mappings, and conditions, see <a href="./template-anatomy.html">CloudFormation template sections</a>.</p>
   
    <h2 id="modules-reuse">Use modules to reuse resource configurations</h2>

    <p>As your infrastructure grows, common patterns can emerge in which you declare the same
      components in each of your templates. <em>Modules</em> are a way for you to
      package resource configurations for inclusion across stack templates, in a transparent,
      manageable, and repeatable way. Modules can encapsulate common service configurations and best
      practices as modular, customizable building blocks for you to include in your stack
      templates.</p>
    <p>These building blocks can be for a single resource, like best practices for defining an
      Amazon Elastic Compute Cloud (Amazon EC2) instance, or they can be for multiple resources, to define common patterns
      of application architecture. These building blocks can be nested into other modules, so you
      can stack your best practices into higher-level building blocks. CloudFormation modules are
      available in the <a href="./registry.html">CloudFormation registry</a>, so you can use them just
      like a native resource. When you use a CloudFormation module, the module template is expanded into
      the consuming template, which makes it possible for you to access the resources inside the
      module using a <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/intrinsic-function-reference-ref.html">Ref</a> or <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/intrinsic-function-reference-getatt.html">Fn::GetAtt</a>. For more information, see <a href="./modules.html">Create reusable resource configurations that can be included across
      templates with CloudFormation modules</a>.</p>
   
    <h2 id="parmtypes">Use AWS-specific parameter types</h2>

    <p>If your template requires inputs for existing AWS-specific values, such as existing
      Amazon Virtual Private Cloud IDs or an Amazon EC2 key pair name, use AWS-specific parameter types. For example, you
      can specify a parameter as type <code class="code">AWS::EC2::KeyPair::KeyName</code>, which takes an
      existing key pair name that's in your AWS account and in the Region where you are creating
      the stack. CloudFormation can quickly validate values for AWS-specific parameter types before
      creating your stack. Also, if you use the CloudFormation console, CloudFormation shows a drop down
      list of valid values, so you don't have to look up or memorize the correct VPC IDs or key pair
      names. For more information, see <a href="./cloudformation-supplied-parameter-types.html">Specify existing resources at
            runtime with CloudFormation-supplied parameter types</a>.</p>
   
    <h2 id="parmconstraints">Use parameter constraints</h2>

    <p>With constraints, you can describe allowed input values so that CloudFormation catches any not
      valid values before creating a stack. You can set constraints such as a minimum length,
      maximum length, and allowed patterns. For example, you can set constraints on a database user
      name value so that it must be a minimum length of eight character and contain only
      alphanumeric characters. For more information, see <a href="./parameters-section-structure.html">CloudFormation template Parameters
      syntax</a>.</p>
   
    <h2 id="pseudoparameters">Use pseudo parameters to promote portability</h2>

    <p>You can use <a href="./pseudo-parameter-reference.html">pseudo parameters</a> in your
      templates as arguments for <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/intrinsic-function-reference.html">intrinsic functions</a>, such as
        <code class="code">Ref</code> and <code class="code">Fn::Sub</code>. Pseudo parameters are parameters that are
      predefined by CloudFormation. You don't declare them in your template. Using pseudo parameters in
      intrinsic functions increases the portability of your stack templates across Regions and
      accounts.</p>
    <p>For example, imagine you wanted to create a template where, for a given resource property,
      you need to specify the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference-arns.html">Amazon Resource Name</a> (ARN) of another
      existing resource. In this case, the existing resource is an <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS Systems Manager
        Parameter Store</a> resource with the following ARN:
        <code class="code">arn:aws:ssm:us-east-1:123456789012:parameter/MySampleParameter</code>. You will need
      to adapt the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference-arns.html#arns-syntax">ARN format</a> to your target
      AWS partition, Region, and account ID. Instead of hard-coding these values, you can use
        <code class="code">AWS::Partition</code>, <code class="code">AWS::Region</code>, and <code class="code">AWS::AccountId</code>
      pseudo parameters to make your template more portable. In this case, the following example
      shows you how to concatenate elements in an ARN with CloudFormation: <code class="code">!Sub
        'arn:$<span>{</span>AWS::Partition}:ssm:$<span>{</span>AWS::Region}:$<span>{</span>AWS::AccountId}:parameter/MySampleParameter</code>.</p>
    <p>For another example, assume you want to share resources or configurations across multiple
      stacks. In this example, assume you have created a <a href="https://docs.aws.amazon.com/vpc/latest/userguide/configure-subnets.html">subnet</a> for your VPC, and then
      exported its ID for use with other stacks in the same AWS account and Region. In another
      stack, you reference the exported value of the subnet ID when describing an Amazon EC2 instance.
      For a detailed example of using the <code class="code">Export</code> output field and
        <code class="code">Fn::ImportValue</code> intrinsic function, see <a href="./walkthrough-crossstackref.html">Refer to resource outputs in another CloudFormation
      stack</a>.</p>
    <p>Stack exports must be unique per account and Region. So, in this case, you can use the
        <code class="code">AWS::StackName</code> pseudo parameter to create a prefix for your export. Since stack
      names must also be unique per account and Region, the usage of this pseudo parameter as a
      prefix increases the possibility of having a unique export name while also promoting a
      reusable approach across stacks from where you export values. Alternatively, you can use a
      prefix of your own choice.</p>
   
    <h2 id="cfninit">Use <code class="code">AWS::CloudFormation::Init</code> to deploy software
        applications on Amazon EC2 instances</h2>

    <p>When you launch stacks, you can install and configure software applications on Amazon EC2
      instances by using the <code class="code">cfn-init</code> helper script and the
        <code class="code">AWS::CloudFormation::Init</code> resource. By using
        <code class="code">AWS::CloudFormation::Init</code>, you can describe the configurations that you want
      rather than scripting procedural steps. You can also update configurations without recreating
      instances. And if anything goes wrong with your configuration, CloudFormation generates logs that
      you can use to investigate issues.</p>
    <p>In your template, specify installation and configuration states in the
        <code class="code">AWS::CloudFormation::Init</code> resource. For a walkthrough that shows how to use
        <code class="code">cfn-init</code> and <code class="code">AWS::CloudFormation::Init</code>, see <a href="./deploying.applications.html">Deploy applications on Amazon EC2</a>.</p>
   
    <h2 id="helper-scripts">Use the latest helper scripts</h2>

    <p>The CloudFormation helper scripts are updated periodically. Be sure you include the following
      command in the <code class="code">UserData</code> property of your template before you call the helper
      scripts to ensure that your launched instances get the latest helper scripts:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (sh)--><code class="sh "><code class="userinput">yum install -y aws-cfn-bootstrap</code></code></pre>
    <p>For more information about getting the latest helper scripts, see the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/cfn-helper-scripts-reference.html">CloudFormation helper
        scripts reference</a> in the <em>AWS CloudFormation Template Reference Guide</em>.</p>
   
    <h2 id="validate">Validate templates before using them</h2>

    <p>Before you use a template to create or update a stack, you can use CloudFormation to validate
      it. Validating a template can help you catch syntax and some semantic errors, such as circular
      dependencies, before CloudFormation creates any resources. If you use the CloudFormation console, the
      console automatically validates the template after you specify input parameters. For the AWS CLI
      or CloudFormation API, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html">validate-template</a> CLI command or <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ValidateTemplate.html">ValidateTemplate</a> API
      operation.</p>
    <p>During validation, CloudFormation first checks if the template is valid JSON. If it isn't,
      CloudFormation checks if the template is valid YAML. If both checks fail, CloudFormation returns a
      template validation error.</p>
     
      <h3 id="validate-compliance">Validate templates for organization policy
          compliance</h3>
      <p>You can also validate your template for compliance to organization policy guidelines.
        AWS CloudFormation Guard (<code class="code">cfn-guard</code>) is an open-source command line interface (CLI) tool
        that provides a policy-as-code language to define rules that can check for both required and
        prohibited resource configurations. It then enables you to validate your templates against
        those rules. For example, administrators can create rules to ensure that users always create
        encrypted Amazon S3 buckets.</p>
      <p>You can use <code class="code">cfn-guard</code> either locally, while editing templates, or
        automatically as part of a CI/CD pipeline to stop deployment of non-compliant
        resources.</p>
      <p>Additionally, <code class="code">cfn-guard</code> includes a feature, <code class="code">rulegen</code>, that
        enables you to extract rules from existing compliant CloudFormation templates.</p>
      <p>For more information, see the <a href="https://github.com/aws-cloudformation/cloudformation-guard" rel="noopener noreferrer" target="_blank"><span>cfn-guard</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
        repository on GitHub.</p>
     
   
    <h2 id="donttouch">Manage all stack resources through CloudFormation</h2>

    <p>After you launch a stack, use the CloudFormation <a href="https://console.aws.amazon.com/cloudformation/home" rel="noopener noreferrer" target="_blank"><span>console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/">API</a>, or <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/index.html">AWS CLI</a> to update resources in your
      stack. Don't make changes to stack resources outside of CloudFormation. Doing so can create a
      mismatch between your stack's template and the current state of your stack resources, which
      can cause errors if you update or delete the stack. This is known as drift. If a change is
      made to a resource outside of the CloudFormation template and you update the stack, the changes
      made directly to the resource will be discarded, and the resource configuration will revert to
      the configuration in the template.</p>
    <p>For more information on drift, see <a href="./using-cfn-stack-drift.html#what-is-drift">What is drift?</a>.</p>
    <p>For more information on updating stacks, see <a href="./updating.stacks.walkthrough.html">Updating a stack</a>.</p>
   
    <h2 id="cfn-best-practices-changesets">Create change sets before updating your
        stacks</h2>

    <p>Change sets allow you to see how proposed changes to a stack might impact your running
      resources before you implement them. CloudFormation doesn't make any changes to your stack until
      you run the change set, allowing you to decide whether to proceed with your proposed changes
      or create another change set.</p>
    <p>Use change sets to check how your changes might impact your running resources, especially
      for critical resources. For example, if you change the name of an Amazon RDS database instance,
      CloudFormation will create a new database and delete the old one; you will lose the data in the
      old database unless you've already backed it up. If you generate a change set, you will see
      that your change will replace your database. This can help you plan before you update your
      stack. For more information, see <a href="./using-cfn-updating-stacks-changesets.html">Update CloudFormation stacks using change
      sets</a>.</p>
   
    <h2 id="stackpolicy">Use stack policies</h2>

    <p>Stack policies help protect critical stack resources from unintentional updates that could
      cause resources to be interrupted or even replaced. A stack policy is a JSON document that
      describes what update actions can be performed on designated resources. Specify a stack policy
      whenever you create a stack that has critical resources.</p>
    <p>During a stack update, you must explicitly specify the protected resources that you want
      to update; otherwise, no changes are made to protected resources. For more information, see
        <a href="./protect-stack-resources.html">Prevent updates to stack resources</a>.</p>
   
    <h2 id="code">Use code reviews and revision controls to manage your templates</h2>

    <p>Your stack templates describe the configuration of your AWS resources, such as their
      property values. To review changes and to keep an exact history of your resources, use code
      reviews and revision controls. These methods can help you track changes between different
      versions of your templates, which can help you track changes to your stack resources. Also, by
      maintaining a history, you can always revert your stack to a certain version of your
      template.</p>
   
    <h2 id="update-ec2-linux">Update your Amazon EC2 instances regularly</h2>

    <p>On all your Amazon EC2 Windows instances and Amazon EC2 Linux instances created with CloudFormation,
      regularly run the <code class="code">yum update</code> command to update the RPM package. This ensures that
      you get the latest fixes and security updates.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./gettingstarted.walkthrough.html">Creating your first stack</div><div id="next" class="next-link" accesskey="n" href="./template-guide.html">Working with templates</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/best-practices.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/best-practices.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>