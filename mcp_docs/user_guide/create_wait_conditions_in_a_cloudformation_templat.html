<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create wait conditions in a CloudFormation template - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-cfn-waitcondition" /><meta name="default_state" content="using-cfn-waitcondition" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="description" content="Create a wait condition in a template to coordinate the creation of stack resources or track the progress of a configuration process." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Create wait conditions in a CloudFormation template" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Create wait conditions in a CloudFormation template - AWS CloudFormation</title><meta name="pdf" content="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#using-cfn-waitcondition" /><meta name="rss" content="aws-cloudformation-user-guide-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set,CloudFormation templates,define your infrastructure" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Working with CloudFormation templates",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-guide.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Extend your template's capabilities with CloudFormation-supplied resource types",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-supplied-resource-types.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Create wait conditions in a CloudFormation template",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-supplied-resource-types.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#using-cfn-waitcondition" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#creating-wait-condition">Creating a wait condition in your
                template</a><a href="#wait-condition-signal-syntax">Wait condition signal syntax</a><a href="#wait-condition-access-signal-data">Accessing signal data</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-cfn-waitcondition">Create wait conditions in a CloudFormation
            template</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>This topic explains how to create a wait condition in a template to coordinate the
        creation of stack resources or track the progress of a configuration process. For example,
        you can start the creation of another resource after an application configuration is
        partially complete, or you can send signals during an installation and configuration process
        to track its progress. </p><p>When CloudFormation creates a stack that includes a wait condition:</p><div class="itemizedlist">
         
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p>It creates a wait condition just like any other resource and sets the wait
                conditionâs status to <code class="code">CREATE_IN_PROGRESS</code>.</p>
        </li><li class="listitem">
            <p>CloudFormation waits until it receives the requisite number of success signals or the
                wait conditionâs timeout period has expired. </p>
        </li><li class="listitem">
            <p>If it receives the requisite number of success signals before the timeout period
                expires:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Wait condition status changes to <code class="code">CREATE_COMPLETE</code></p>
                </li><li class="listitem">
                    <p>Stack creation continues</p>
                </li></ul></div>
        </li><li class="listitem">
            <p>If timeout expires or a failure signal is received:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Wait condition status changes to <code class="code">CREATE_FAILED</code></p>
                </li><li class="listitem">
                    <p>Stack rolls back</p>
                </li></ul></div>
        </li></ul></div><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>For Amazon EC2 and Auto Scaling resources, we recommend that you use a CreationPolicy attribute instead of wait conditions.
Add a CreationPolicy attribute to those resources, and use the cfn-signal helper script to signal when an instance creation process has completed successfully.</p><p>For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-creationpolicy.html">CreationPolicy attribute</a>.</p></div></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you use AWS PrivateLink, resources in the VPC that respond to wait conditions must
            have access to CloudFormation-specific Amazon Simple Storage Service (Amazon S3) buckets. Resources must send wait
            condition responses to a presigned Amazon S3 URL. If they can't send responses to Amazon S3,
            CloudFormation won't receive a response and the stack operation fails. For more information,
            see <a href="./vpc-interface-endpoints.html">Access CloudFormation using an interface endpoint
            (AWS PrivateLink)</a>
            and <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies-vpc-endpoint.html">Controlling access from VPC endpoints with bucket policies</a>.</p></div></div><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><p><a href="#creating-wait-condition">Creating a wait condition in your
                template</a></p></li><li><p><a href="#wait-condition-signal-syntax">Wait condition signal syntax</a></p></li><li><p><a href="#wait-condition-access-signal-data">Accessing signal data</a></p></li></ul></div>
        <h2 id="creating-wait-condition">Creating a wait condition in your
                template</h2>
         
            <h6>1. Wait condition handle</h6>
            <p>You start by defining a <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cloudformation-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a> resource in
                the stack's template. This resource generates the presigned URL needed for sending
                signals. This allows you to send a signal without having to supply your AWS
                credentials. For example: </p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">Resources:
  <code class="replaceable">MyWaitHandle</code>:
    Type: AWS::CloudFormation::WaitConditionHandle</code></pre>
         
            <h6>2. Wait condition</h6>
            <p>Next, you define an <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-resource-cloudformation-waitcondition.html">AWS::CloudFormation::WaitCondition</a> resource in the
                stack's template. The basic structure of a
                    <code class="code">AWS::CloudFormation::WaitCondition</code> looks like this: </p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">  <code class="replaceable">MyWaitCondition</code>:
    Type: AWS::CloudFormation::WaitCondition
    Properties:
      Handle: <code class="replaceable">String</code>
      Timeout: <code class="replaceable">String</code>
      Count: <code class="replaceable">Integer</code></code></pre>
        <p>The <code class="code">AWS::CloudFormation::WaitCondition</code> resource has two required
            properties and one optional property.</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">Handle</code> (required) â A reference to a
                        <code class="code">WaitConditionHandle</code> declared in the template.</p>
            </li><li class="listitem">
                <p><code class="code">Timeout</code> (required) â The number of seconds for CloudFormation
                    to wait for the requisite number of signals to be received. <code class="code">Timeout</code>
                    is a minimum-bound property, meaning the timeout occurs no sooner than the time
                    you specify, but can occur shortly thereafter. The maximum time that you can
                    specify is 43200 seconds (12 hours ).</p>
            </li><li class="listitem">
                <p><code class="code">Count</code> (optional) â The number of success signals that
                    CloudFormation must receive before it sets that wait conditionâs status to
                        <code class="code">CREATE_COMPLETE</code> and resumes creating the stack. If not
                    specified, the default value is 1.</p>
            </li></ul></div>
        <p>Typically, you want a wait condition to begin immediately after the creation of a
            specific resource. You do this by adding the <code class="code">DependsOn</code> attribute to a wait condition. When you add a
                <code class="code">DependsOn</code> attribute to a wait condition, CloudFormation creates the
            resource in the <code class="code">DependsOn</code> attribute first, and then creates the wait
            condition. For more information, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-dependson.html">DependsOn attribute</a>.</p>
        <p>The following example demonstrates a wait condition that: </p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Begins after the successful creation of the <code class="code">MyEC2Instance</code>
                    resource</p>
            </li><li class="listitem">
                <p>Uses the <code class="code">MyWaitHandle</code> resource as the
                        <code class="code">WaitConditionHandle</code></p>
            </li><li class="listitem">
                <p>Has a timeout of 4500 seconds</p>
            </li><li class="listitem">
                <p>Has the default <code class="code">Count</code> of 1 (since no <code class="code">Count</code> property
                    is specified)</p>
            </li></ul></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">  <code class="replaceable">MyWaitCondition</code>:
    Type: AWS::CloudFormation::WaitCondition
    DependsOn: <code class="replaceable">MyEC2Instance</code>
    Properties:
      Handle: <code class="replaceable">!Ref MyWaitHandle</code>
      Timeout: <code class="replaceable">'4500'</code></code></pre>
         
            <h6>3. Sending a signal</h6>
            <p>To signal success or failure to CloudFormation, you typically run some code or script.
                For example, an application running on an EC2 instance might perform some additional
                configuration tasks and then send a signal to CloudFormation to indicate
                completion.</p>
         
        <p>The signal must be sent to the presigned URL generated by the wait condition handle.
            You use that presigned URL to signal success or failure.</p>
        <div class="procedure"><h6>To send a signal</h6><ol><li>
                <p>To retrieve the presigned URL within the template, use the <code class="code">Ref</code>
                    intrinsic function with the logical name of the wait condition handle. </p>
                <p>As shown in the following example, your template can declare an Amazon EC2 instance
                    and pass the presigned URL to EC2 instances using the Amazon EC2
                        <code class="code">UserData</code> property. This allows scripts or applications running
                    on those instances to signal success or failure to CloudFormation.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">  <code class="replaceable">MyEC2Instance</code>:
    Type: AWS::EC2::Instance
    Properties:
    InstanceType: <code class="replaceable">t2.micro</code>  # Example instance type
    ImageId: <code class="replaceable">ami-055e3d4f0bbeb5878</code>  # Change this as needed (Amazon Linux 2023 in us-west-2)
    UserData:
      Fn::Base64: 
        Fn::Join: 
          - ""
          - - <code class="replaceable">"SignalURL="</code>
            - <span>{</span> "Ref": <code class="replaceable">"MyWaitHandle"</code> }</code></pre>
                <p>This results in <code class="code">UserData</code> output similar to:</p>
                <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli ()--><code class="nohighlight"><code class="replaceable">SignalURL=https://amzn-s3-demo-bucket.s3.amazonaws.com/....</code></code></pre>
                <p>Note: In the AWS Management Console and the command line tools, the presigned URL is
                    displayed as the physical ID of the wait condition handle resource.</p>
            </li><li>
                <p>(Optional) To detect when the stack enters the wait condition, you can use one
                    of the following methods:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>If you create the stack with notifications enabled, CloudFormation
                            publishes a notification for every stack event to the specified topic.
                            If you or your application subscribe to that topic, you can monitor the
                            notifications for the wait condition handle creation event and retrieve
                            the presigned URL from the notification message.</p>
                    </li><li class="listitem">
                        <p>You can also monitor the stack's events using the AWS Management Console, the
                            AWS CLI, or an SDK.</p>
                    </li></ul></div>
            </li><li>
                <p>To send a signal, you send an HTTP request message using the presigned URL.
                    The request method must be <code class="code">PUT</code> and the <code class="code">Content-Type</code>
                    header must be an empty string or omitted. The request message must be a JSON
                    structure of the form specified in <a href="#wait-condition-signal-syntax">Wait condition signal syntax</a>.</p>
                <p>You must send the number of success signals specified by the
                        <code class="code">Count</code> property in order for CloudFormation to continue stack
                    creation. If you have a <code class="code">Count</code> that is greater than 1, the
                        <code class="code">UniqueId</code> value for each signal must be unique across all
                    signals sent to a particular wait condition. The <code class="code">UniqueId</code> is an
                    arbitrary alphanumerical string.</p>
                <p>A <code class="code">curl</code> command is one way to send a signal. The following example
                    shows a <code class="code">curl</code> command line that signals success to a wait
                    condition.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (sh)--><code class="sh "><code class="prompt" copy="false">$ </code>curl -T <code class="replaceable">/tmp/a</code> \
  <code class="replaceable">"https://amzn-s3-demo-bucket.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3Aus-west-2%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
                <p>where the file <code class="replaceable"><code>/tmp/a</code></code> contains
                    the following JSON structure:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
   "Status" : <code class="replaceable">"SUCCESS"</code>,
   "Reason" : <code class="replaceable">"Configuration Complete"</code>,
   "UniqueId" : <code class="replaceable">"ID1234"</code>,
   "Data" : <code class="replaceable">"Application has completed configuration."</code>
}</code></pre>
                <p>This example shows a <code class="code">curl</code> command line that sends the same
                    success signal except it sends the JSON structure as a parameter on the command
                    line.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (sh)--><code class="sh "><code class="prompt" copy="false">$ </code>curl -X PUT \
  -H 'Content-Type:' --data-binary <code class="replaceable">'<span>{</span>"Status" : "SUCCESS","Reason" : "Configuration Complete","UniqueId" : "ID1234","Data" : "Application has completed configuration."}'</code> \
  <code class="replaceable">"https://amzn-s3-demo-bucket.s3.amazonaws.com/arn%3Aaws%3Acloudformation%3Aus-west-2%3A034017226601%3Astack%2Fstack-gosar-20110427004224-test-stack-with-WaitCondition--VEYW%2Fe498ce60-70a1-11e0-81a7-5081d0136786%2FmyWaitConditionHandle?Expires=1303976584&amp;AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&amp;Signature=ik1twT6hpS4cgNAw7wyOoRejVoo%3D"</code></code></pre>
            </li></ol></div>
     
        <h2 id="wait-condition-signal-syntax">Wait condition signal syntax</h2>

        <p>When you send signals to the URL generated by the wait condition handle, you must use
            the following JSON format:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
  "Status" : <code class="replaceable">"StatusValue"</code>,
  "UniqueId" : <code class="replaceable">"Some UniqueId"</code>,
  "Data" : <code class="replaceable">"Some Data"</code>,
  "Reason" : <code class="replaceable">"Some Reason"</code>
}</code></pre>
         
            <h3 id="wait-condition-signal-properties">Properties</h3>

            <p>The <code class="code">Status</code> field must be one of the following values:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">SUCCESS</code></p>
                </li><li class="listitem">
                    <p><code class="code">FAILURE</code></p>
                </li></ul></div>
            <p>The <code class="code">UniqueId</code> field identifies the signal to CloudFormation. If the
                    <code class="code">Count</code> property of the wait condition is greater than 1, the
                    <code class="code">UniqueId</code> value must be unique across all signals sent for a
                particular wait condition; otherwise, CloudFormation will consider the signal a
                retransmission of the previously sent signal with the same <code class="code">UniqueId</code> and
                ignore it.</p>
            <p>The <code class="code">Data</code> field can contain any information you want to send back with
                the signal. You can access the <code class="code">Data</code> value by using the <a href="./resources-section-structure.html#resource-properties-getatt">Fn::GetAtt</a> function within
                the template.</p>
            <p>The <code class="code">Reason</code> field is a string with no other restrictions on its
                content besides JSON compliance.</p>
         
     
        <h2 id="wait-condition-access-signal-data">Accessing signal data</h2>
        <p>To access the data sent by valid signals, you can create an output value for the wait
            condition in your CloudFormation template. For example:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (yaml)--><code class="yaml ">Outputs:
  <code class="replaceable">WaitConditionData</code>:
    Description: <code class="replaceable">The data passed back as part of signalling the WaitCondition</code>
    Value: !GetAtt <code class="replaceable">MyWaitCondition</code>.Data</code></pre>

        <p>You can then view this data using the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudformation/describe-stacks.html">describe-stacks</a> command, or the
                <b>Outputs</b> tab of the CloudFormation console.</p>

        <p>The <code class="code">Fn::GetAtt</code> function returns the <code class="code">UniqueId</code> and
                <code class="code">Data</code> as a name/value pair within a JSON structure. For example:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (json)--><code class="json "><code class="replaceable"><span>{</span>"Signal1":"Application has completed configuration."}</code></code></pre>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./using-cfn-nested-stacks.html">Nested stacks</div><div id="next" class="next-link" accesskey="n" href="./modules.html">Create reusable resource configurations with modules</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/using-cfn-waitcondition.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>