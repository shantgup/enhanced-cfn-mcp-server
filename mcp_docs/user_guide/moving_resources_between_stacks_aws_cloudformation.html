<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Moving resources between stacks - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="refactor-stacks" /><meta name="default_state" content="refactor-stacks" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="description" content="Use the resource import feature to move resources between stacks." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Moving resources between stacks" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Moving resources between stacks - AWS CloudFormation</title><meta name="pdf" content="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#refactor-stacks" /><meta name="rss" content="aws-cloudformation-user-guide-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/refactor-stacks.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set,CloudFormation stacks,create a collection of resources as a CloudFormation stack" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Managing AWS resources as a single unit with AWS CloudFormation stacks",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Import AWS resources into a CloudFormation stack",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Import AWS resources into a CloudFormation stack manually",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources-manually.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Moving resources between stacks",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources-manually.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#refactor-stacks" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#refactor-stacks-console">Refactor a stack using the AWS Management Console</a><a href="#refactor-stacks-cli">Refactor a stack using the AWS CLI</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="refactor-stacks">Moving resources between stacks</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Using the <code class="code">resource import</code> feature, you can move resources between, or
            <em>refactor</em>, stacks. You need to first add a <code class="code">Retain</code>
        deletion policy to the resource you want to move to ensure that the resource is preserved
        when you remove it from the source stack and import it to the target stack.</p><p>If you're new to importing, we recommend that you first review the introductory
        information in the <a href="./import-resources.html">Import AWS resources into a CloudFormation stack</a>
        topic.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Not all resources support import operations. See <a href="./resource-import-supported-resources.html">Resources that support import
                operations</a> before you remove a resource from your stack. If you remove a
            resource that doesn't support import operations from your stack, you can't import the
            resource into another stack or bring it back into the source stack.</p></div></div>
        <h2 id="refactor-stacks-console">Refactor a stack using the AWS Management Console</h2>

        <div class="procedure"><ol><li>
                <p>In the source template, specify a <code class="code">Retain</code>
                    <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-deletionpolicy.html">DeletionPolicy</a> for the resource you want to move.</p>
                <p>In the following example source template, <code class="code">Games</code> is the target of
                    this refactor.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "DeletionPolicy": "Retain",
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>

            </li><li>
                <p>Open the CloudFormation console to perform a stack update to apply the deletion
                    policy.</p>
                <ol><li>
                        <p>On the <b>Stacks</b> page, with the stack selected,
                            choose <b>Update</b>.</p>
                    </li><li>
                        <p>Under <b>Prepare template</b>, choose <b>Replace
                                current template</b>.</p>
                    </li><li>
                        <p>Under <b>Specify template</b>, provide the updated
                            source template with the <code class="code">DeletionPolicy</code> attribute on
                                <code class="code">GamesTable</code>, and then choose
                            <b>Next</b>.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Choose <b>Amazon S3 URL</b>, and then specify
                                    the URL to the updated source template in the text box.</p>
                            </li><li class="listitem">
                                <p>Choose <b>Upload a template file</b>, and then
                                    browse for the updated source template file.</p>
                            </li></ul></div>
                    </li><li>
                        <p>On the <b>Specify stack details</b> page, no changes are
                            required. Choose <b>Next</b>.</p>
                    </li><li>
                        <p>On the <b>Configure stack options</b> page, no changes
                            are required. Choose <b>Next</b>.</p>
                    </li><li>
                        <p>On the <b>Review
                                <code class="replaceable">SourceStackName</code></b> page, review
                            your changes. If your template contains IAM resources, select
                                <b>I acknowledge that this template may create IAM
                                resources</b> to specify that you want to use IAM resources
                            in the template. For more information about using IAM resources in
                            templates, see <a href="./control-access-with-iam.html">Control CloudFormation access with AWS Identity and Access Management</a>. Then, either update your
                            source stack by creating a change set or update your source stack
                            directly.</p>
                    </li></ol>
            </li><li>
                <p>Remove the resource, related parameters, and outputs from the source template,
                    and then add them to the target template.</p>
                <p>The source template now looks like the following.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        }
    }
}</code></pre></div></div>
                <p>The following example target template currently has the
                        <code class="code">PlayersTable</code> resource, and now also contains
                        <code class="code">GamesTable</code>.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "PlayersTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "Properties": <span>{</span>
                "TableName": "Players",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "DeletionPolicy": "Retain",
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
            </li><li>
                <p>Repeat steps 2 â 3 to update the source stack again, this time to
                    delete the target resource from the stack.</p>
            </li><li>
                <p>Perform an import operation to add <code class="code">GamesTable</code> to the target
                    stack.</p>
                <ol><li>
                        <p>On the <b>Stacks</b> page, with the parent stack
                            selected, choose <b>Stack actions</b>, and then choose
                                <b>Import resources into stack</b>.</p>
                        <div class="mediaobject">
                             
                                <img src="/images/AWSCloudFormation/latest/UserGuide/images/stack-actions-import.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="The Import resources into stack option in the console." />
                             
                             
                        </div>
                    </li><li>
                        <p>Read the <b>Import overview</b> page for a list of
                            things you're required to provide during this operation. Then, choose
                                <b>Next</b>.</p>
                    </li><li>
                        <p>On the <b>Specify template</b> page, complete one of the
                            following, and then choose <b>Next</b>.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Choose <b>Amazon S3 URL</b>, and then specify a
                                    URL in the text box.</p>
                            </li><li class="listitem">
                                <p>Choose <b>Upload a template file</b>, and then
                                    browse for a file to upload.</p>
                            </li></ul></div>
                    </li><li>
                        <p>On the <b>Identify resources</b> page, identify the
                            resource you're moving (in this example, <code class="code">GamesTable</code>). For
                            more information, see <a href="./import-resources-manually.html#resource-import-identifiers-unique-ids">Resource identifiers</a>.</p>
                        <div class="orderedlist">
                             
                             
                             
                        <ol><li>
                                <p>Under <b>Identifier property</b>, choose the
                                    type of resource identifier. For example, an
                                        <code class="code">AWS::DynamoDB::Table</code> resource can be identified
                                    using the <code class="code">TableName</code> property.</p>
                            </li><li>
                                <p>Under <b>Identifier value</b>, type the actual
                                    property value. For example,
                                            <code class="code"><code class="replaceable">GamesTables</code></code>. </p>
                                
                            </li><li>
                                <p>Choose <b>Next</b>.</p>
                            </li></ol></div>
                    </li><li>
                        <p>On the <b>Specify stack details</b> page, modify any
                            parameters, and then choose <b>Next</b>. This
                            automatically creates a change set.</p>
                        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>The import operation fails if you modify existing parameters that
                                initiate a create, update, or delete operation.</p></div></div>
                    </li><li>
                        <p>On the <b>Review
                                <code class="replaceable">TargetStackName</code></b> page, confirm
                            that the correct resource is being imported, and then choose
                                <b>Import resources</b>. This automatically initiates
                            the change set created in the last step. Any <a href="./cfn-console-create-stack.html#configure-stack-options">stack-level tags</a> are
                            applied to imported resources at this time.</p>
                    </li><li>
                        <p>The <b>Events</b> pane of the <b>Stack
                                details</b> page for your parent stack displays.</p>
                        <div class="mediaobject">
                             
                                <img src="/images/AWSCloudFormation/latest/UserGuide/images/import-events.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="The Events tab in the console." />
                             
                             
                        </div>
                        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It's not necessary to run drift detection on the parent stack
                                after this import operation because the
                                    <code class="code">AWS::CloudFormation::Stack</code> resource is already
                                managed by CloudFormation.</p></div></div>
                    </li></ol>
            </li></ol></div>

     
        <h2 id="refactor-stacks-cli">Refactor a stack using the AWS CLI</h2>
        <div class="procedure"><ol><li>
                <p>In the source template, specify a <code class="code">Retain</code>
                    <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-deletionpolicy.html">DeletionPolicy</a> for the resource you want to move.</p>
                <p>In the following example source template, <code class="code">GamesTable</code> is the
                    target of this refactor.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "DeletionPolicy": "Retain",
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
            </li><li>
                <p>Update the source stack to apply the deletion policy to the resource.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation update-stack --stack-name <code class="replaceable">SourceStackName</code></code></pre>
            </li><li>
                <p>Remove the resource, related parameters, and outputs from the source template,
                    and then add them to the target template.</p>
                <p>The source template now looks like the following.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        }
    }
}</code></pre></div></div>
                <p>The following example target template currently has the
                        <code class="code">PlayersTable</code> resource, and now also contains
                        <code class="code">GamesTable</code>.</p>
                <div class="example"><h6>Example JSON</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Import test",
    "Resources": <span>{</span>
        "PlayersTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "Properties": <span>{</span>
                "TableName": "Players",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        },
        "GamesTable": <span>{</span>
            "Type": "AWS::DynamoDB::Table",
            "DeletionPolicy": "Retain",
            "Properties": <span>{</span>
                "TableName": "Games",
                "AttributeDefinitions": [
                    <span>{</span>
                        "AttributeName": "key",
                        "AttributeType": "S"
                    }
                ],
                "KeySchema": [
                    <span>{</span>
                        "AttributeName": "key",
                        "KeyType": "HASH"
                    }
                ],
                "ProvisionedThroughput": <span>{</span>
                    "ReadCapacityUnits": 5,
                    "WriteCapacityUnits": 1
                }
            }
        }
    }
}</code></pre></div></div>
            </li><li>
                <p>Update the source stack to delete the <code class="code">GamesTable</code> resource and its
                    related parameters and outputs from the stack.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation update-stack --stack-name <code class="replaceable">SourceStackName</code></code></pre>
            </li><li>
                <p>Compose a list of actual resources to import and their unique identifiers in
                    the following JSON string format. For more information, see <a href="./import-resources-manually.html#resource-import-identifiers-unique-ids">Resource identifiers</a>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (text)--><code class="text ">[<span>{</span>"ResourceType":"AWS::DynamoDB::Table","LogicalResourceId":"GamesTable","ResourceIdentifier":<span>{</span>"TableName":"Games"}}]</code></pre>
                <p>Alternatively, you can specify the JSON-formatted parameters in a
                    configuration file. </p>
                <p>For example, to import <code class="code">GamesTable</code>, you might create a
                        <code class="replaceable">ResourcesToImport.txt</code> file that contains the
                    following configuration.</p>
                <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json ">[
  <span>{</span>
      "ResourceType":"AWS::DynamoDB::Table",
      "LogicalResourceId":"GamesTable",
      "ResourceIdentifier": <span>{</span>
        "TableName":"Games"
      }
  }
]</code></pre>
            </li><li>
                <p>To create a change set, use the following <b>create-change-set</b>
                    command and replace the placeholder text. For the <code class="code">--change-set-type</code>
                    option, specify a value of <code class="userinput">IMPORT</code>. For the
                        <code class="code">--resources-to-import</code> option, replace the sample JSON string
                    with the actual JSON string you just created.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation create-change-set \
    --stack-name <code class="replaceable">TargetStackName</code> --change-set-name <code class="replaceable">ImportChangeSet</code> \
    --change-set-type <code class="userinput">IMPORT</code> \
    --template-body <code class="replaceable">file://TemplateToImport.json</code> \
    --resources-to-import "<code class="replaceable">'[<span>{</span>"ResourceType":"AWS::DynamoDB::Table","LogicalResourceId":"GamesTable","ResourceIdentifier":<span>{</span>"TableName":"Games"}}]'</code>"</code></pre>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p><code class="code">--resources-to-import</code> doesn't support inline YAML. The
                        requirements for escaping quotes in the JSON string vary depending on your
                        terminal. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-parameters-quoting-strings.html#cli-usage-parameters-quoting-strings-containing">Using quotation marks inside strings</a> in the
                            <em>AWS Command Line Interface User Guide</em>.</p></div></div>
                <p>Alternatively, you can use a file URL as input for the
                        <code class="code">--resources-to-import</code> option, as shown in the following
                    example.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class="nohighlight">--resources-to-import <code class="replaceable">file://ResourcesToImport.txt</code></code></pre>
            </li><li>
                <p>Review the change set to make sure the correct resource is being imported into
                    the target stack.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation describe-change-set \
    --change-set-name <code class="replaceable">ImportChangeSet</code></code></pre>
            </li><li>
                <p>To initiate the change set and import the resource, use the following
                        <b>execute-change-set</b> command and replace the placeholder
                    text. Any stack-level tags are applied to imported resources at this time. On
                    successful completion of the operation <code class="code">(IMPORT_COMPLETE)</code>, the
                    resource is successfully imported.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation execute-change-set \
    --change-set-name <code class="replaceable">ImportChangeSet</code> --stack-name <code class="replaceable">TargetStackName</code></code></pre>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It's not necessary to run drift detection on the target stack after this
                        import operation because the resource is already managed by
                        CloudFormation.</p></div></div>
            </li></ol></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./resource-import-existing-stack.html">Importing existing resources into a
    stack</div><div id="next" class="next-link" accesskey="n" href="./resource-import-nested-stacks.html">Nesting an existing
         stack</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/refactor-stacks.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/refactor-stacks.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>