<!-- Source URL: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html -->
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Nesting an existing stack - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="resource-import-nested-stacks" /><meta name="default_state" content="resource-import-nested-stacks" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" /><meta name="description" content="Use the resource import feature to nest existing stacks within a parent stack." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" hreflang="x-default" /><meta name="feedback-item" content="CloudFormation" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><head xmlns="http://www.w3.org/1999/xhtml"> <script defer="" src="/assets/r/awsdocs-doc-page.2.0.0.js"></script><link href="/assets/r/awsdocs-doc-page.2.0.0.css" rel="stylesheet"/></head>
<script defer="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Nesting an existing stack" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Nesting an existing stack - AWS CloudFormation</title><meta name="pdf" content="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#resource-import-nested-stacks" /><meta name="rss" content="aws-cloudformation-user-guide-updates.rss" /><meta name="forums" content="https://repost.aws/tags/TAm3R3LNU3RfSX9L23YIpo3w" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set,CloudFormation stacks,create a collection of resources as a CloudFormation stack" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Managing AWS resources as a single unit with AWS CloudFormation stacks",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacks.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Import AWS resources into a CloudFormation stack",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Import AWS resources into a CloudFormation stack manually",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources-manually.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Nesting an existing stack",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/import-resources-manually.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSCloudFormation/latest/UserGuide/cfn-ug.pdf#resource-import-nested-stacks" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#resource-import-nested-stacks-validation">Nested stack import
            validation</a><a href="#resource-import-nested-stacks-console">Nest an existing stack
            using the AWS Management Console</a><a href="#resource-import-nested-stacks-cli">Nest an existing stack
            using the AWS CLI</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="resource-import-nested-stacks">Nesting an existing stack</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use the <code class="code">resource import</code> feature to nest an existing stack within another
      existing stack. Nested stacks are common components that you declare and reference from within
      other templates. That way, you can avoid copying and pasting the same configurations into your
      templates and simplify stack updates. If you have a template for a common component, you can
      use the <code class="code">AWS::CloudFormation::Stack</code> resource to reference this template from
      within another template. For more information on nested stacks, see <a href="./using-cfn-nested-stacks.html">Split a template into reusable pieces using nested
            stacks</a>.</p><p>AWS CloudFormation only supports one level of nesting using <code class="code">resource import</code>. This means
      that you can't import a stack into a child stack or import a stack that has children.</p><p>If you're new to importing, we recommend that you first review the introductory information
      in the <a href="./import-resources-manually.html">Import AWS resources into a CloudFormation stack
   manually</a> topic.</p>
      <h2 id="resource-import-nested-stacks-validation">Nested stack import
            validation</h2>
      <p>During a nested stack import operation, AWS CloudFormation performs the following validations.</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>The nested <code class="code">AWS::CloudFormation::Stack</code> definition in the parent stack
               template matches the actual nested stack's template.</p>
         </li><li class="listitem">
            <p>The tags for the nested <code class="code">AWS::CloudFormation::Stack</code> definition in the
               parent stack template match the tags for the actual nested stack resource.</p>
         </li></ul></div>
    
      <h2 id="resource-import-nested-stacks-console">Nest an existing stack using the
            AWS Management Console</h2>

      <div class="procedure"><ol><li>
            <p>Add the <code class="code">AWS::CloudFormation::Stack</code> resource to the parent stack
               template with a <code class="code">Retain</code>
               <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-deletionpolicy.html">DeletionPolicy</a>. In the following example parent stack template,
                  <code class="code">MyNestedStack</code> is the target of the import.</p>
            <p><b>JSON</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Resources" : <span>{</span>
    "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
    "MyNestedStack" : <span>{</span>
      "Type" : "AWS::CloudFormation::Stack",
      "DeletionPolicy": "Retain",
      "Properties" : <span>{</span>
      "TemplateURL" : "<code class="replaceable">https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template</code>",
        <code class="replaceable">"Parameters" : <span>{</span>
          "InstanceType" : "t1.micro",
          "KeyName" : "mykey"</code>
        }
      }
    }
  }
}</code></pre>
            <p><b>YAML</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (yaml)--><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  ServiceTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Service
      AttributeDefinitions:
        - AttributeName: key
          AttributeType: S
      KeySchema:
        - AttributeName: key
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 1
  MyNestedStack:
    Type: 'AWS::CloudFormation::Stack'
    DeletionPolicy: Retain
    Properties:
      TemplateURL: &gt;-
        <code class="replaceable">https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template</code>
      <code class="replaceable">Parameters:
        InstanceType: t1.micro
        KeyName: mykey</code></code></pre>
         </li><li>
            <p>Open the AWS CloudFormation console.</p>
         </li><li>
            <p>On the <b>Stacks</b> page, with the parent stack selected, choose
                  <b>Stack actions</b>, and then choose <b>Import resources
                  into stack</b>.</p>
            <div class="mediaobject">
                
                  <img src="/images/AWSCloudFormation/latest/UserGuide/images/stack-actions-import.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="The Import resources into stack option in the console." />
                
                
            </div>
         </li><li>
            <p>Read the <b>Import overview</b> page for a list of things you're
               required to provide during this operation. Then, choose
               <b>Next</b>.</p>
         </li><li>
            <p>On the <b>Specify template</b> page, provide the updated parent
               template using one of the following methods, and then choose
                  <b>Next</b>.</p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Choose <b>Amazon S3 URL</b>, and then specify the URL for your
                     template in the text box.</p>
               </li><li class="listitem">
                  <p>Choose <b>Upload a template file</b>, and then browse for your
                     template.</p>
               </li></ul></div>
         </li><li>
            <p>On the <b>Identify resources</b> page, identify the
                  <code class="code">AWS::CloudFormation::Stack</code> resource.</p>
            <ol><li>
                  <p>Under <b>Identifier property</b>, choose the type of resource
                     identifier. For example, an <code class="code">AWS::CloudFormation::Stack</code> resource
                     can be identified using the <code class="code">StackId</code> property.</p>
               </li><li>
                  <p>Under <b>Identifier value</b>, type the ARN of the stack
                     you're importing. For example,
                           <code class="code"><code class="replaceable">arn:aws:cloudformation:us-west-2:12345678910:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10</code></code>.</p>
                  <div class="mediaobject">
                      
                        <img src="/images/AWSCloudFormation/latest/UserGuide/images/resource-import-stackid.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="The Identify resources page in the console." />
                      
                      
                  </div>
               </li><li>
                  <p>Choose <b>Next</b>.</p>
               </li></ol>
         </li><li>
            <p>On the <b>Specify stack details</b> page, modify any parameters, and
               then choose <b>Next</b>. This automatically creates a change
               set.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>The import operation fails if you modify existing parameters that initiate a
                  create, update, or delete operation.</p></div></div>
         </li><li>
            <p>On the <b>Review <code class="replaceable">MyParentStack</code></b> page,
               confirm that the correct resource is being imported, and then choose <b>Import
                  resources</b>. This automatically executes the change set created in the
               last step. Any stack-level tags are applied to imported resources at this
               time.</p>
         </li><li>
            <p>The <b>Events</b> pane of the <b>Stack details</b>
               page for your parent stack displays.</p>
            <div class="mediaobject">
                
                  <img src="/images/AWSCloudFormation/latest/UserGuide/images/import-events.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="The Events tab in the console." />
                
                
            </div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It's not necessary to run drift detection on the parent stack after this import
                  operation because the <code class="code">AWS::CloudFormation::Stack</code> resource was already
                  managed by AWS CloudFormation.</p></div></div>
         </li></ol></div>

    
      <h2 id="resource-import-nested-stacks-cli">Nest an existing stack using the
            AWS CLI</h2>
      <div class="procedure"><ol><li>
            <p>Add the <code class="code">AWS::CloudFormation::Stack</code> resource to the parent stack
               template with a <code class="code">Retain</code>
               <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-attribute-deletionpolicy.html">DeletionPolicy</a>. In the following example parent template,
                  <code class="code">MyNestedStack</code> is the target of the import.</p>
            <p><b>JSON</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Resources" : <span>{</span>
    "ServiceTable":<span>{</span>
           "Type":"AWS::DynamoDB::Table",
           "Properties":<span>{</span>
              "TableName":"Service",
              "AttributeDefinitions":[
                 <span>{</span>
                    "AttributeName":"key",
                    "AttributeType":"S"
                 }
              ],
              "KeySchema":[
                 <span>{</span>
                    "AttributeName":"key",
                    "KeyType":"HASH"
                 }
              ],
              "ProvisionedThroughput":<span>{</span>
                 "ReadCapacityUnits":5,
                 "WriteCapacityUnits":1
              }
           }
        },
    "<code class="replaceable">MyNestedStack</code>" : <span>{</span>
      "Type" : "AWS::CloudFormation::Stack",
      "DeletionPolicy": "Retain",
      "Properties" : <span>{</span>
      "TemplateURL" : "<code class="replaceable">https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template</code>",
        <code class="replaceable">"Parameters" : <span>{</span>
          "InstanceType" : "t1.micro",
          "KeyName" : "mykey"</code>
        }
      }
    }
  }
}</code></pre>
            <p><b>YAML</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (yaml)--><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  ServiceTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: Service
      AttributeDefinitions:
        - AttributeName: key
          AttributeType: S
      KeySchema:
        - AttributeName: key
          KeyType: HASH
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 1
  <code class="replaceable">MyNestedStack</code>:
    Type: 'AWS::CloudFormation::Stack'
    DeletionPolicy: Retain
    Properties:
      TemplateURL: &gt;-
        <code class="replaceable">https://s3.amazonaws.com/cloudformation-templates-us-east-2/EC2ChooseAMI.template</code>
      <code class="replaceable">Parameters:
        InstanceType: t1.micro
        KeyName: mykey</code></code></pre>
         </li><li>
            <p>Compose a JSON string as shown in the following example, with these modifications: </p>
            <div class="itemizedlist">
                
                
            <ul class="itemizedlist"><li class="listitem">
                  <p>Replace <code class="replaceable">MyNestedStack</code> with the logical ID of the
                     target resource as specified in the template.</p>
               </li><li class="listitem">
                  <p>Replace
                        <code class="replaceable">arn:aws:cloudformation:us-west-2:12345678910:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10</code>
                     with the ARN of the stack you want to import.</p>
               </li></ul></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (text)--><code class="text ">[<span>{</span>"ResourceType":"AWS::CloudFormation::Stack","LogicalResourceId":"<code class="replaceable">MyNestedStack</code>","ResourceIdentifier":<span>{</span>"StackId":"<code class="replaceable">arn:aws:cloudformation:us-east-2:123456789012:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10</code>"}}]</code></pre>
            <p>Alternatively, you can specify the parameters in a configuration file. </p>
            <p>For example, to import <code class="code">MyNestedStack</code>, you might create a
                  <code class="replaceable">ResourcesToImport.txt</code> file that contains the following
               configuration.</p>
            <p><b>JSON</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json ">[
  <span>{</span>
      "ResourceType":"AWS::CloudFormation::Stack",
      "LogicalResourceId":"<code class="replaceable">MyNestedStack</code>",
      "ResourceIdentifier": <span>{</span>
        "StackId":"<code class="replaceable">arn:aws:cloudformation:us-west-2:12345678910:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10</code>"
      }
  }
]</code></pre>
            <p><b>YAML</b></p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (yaml)--><code class="yaml ">ResourceType: 'AWS::CloudFormation::Stack'
  LogicalResourceId: <code class="replaceable">MyNestedStack</code>
  ResourceIdentifier:
    StackId: &gt;-
      <code class="replaceable">arn:aws:cloudformation:us-west-2:12345678910:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10</code></code></pre>

         </li><li>
            <p>To create a change set, use the following <b>create-change-set</b>
               command and replace the placeholder text. For the <code class="code">--change-set-type</code>
               option, specify a value of <code class="userinput">IMPORT</code>. For the
                  <code class="code">--resources-to-import</code> option, replace the sample JSON string with the
               actual JSON string you just created.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation create-change-set \
    --stack-name <code class="replaceable">MyParentStack</code> --change-set-name <code class="replaceable">ImportChangeSet</code> \
    --change-set-type <code class="userinput">IMPORT</code> \
    --template-body <code class="replaceable">file://TemplateToImport.json</code> \
    --resources-to-import <code class="replaceable">'[<span>{</span>"ResourceType":"AWS::CloudFormation::Stack","LogicalResourceId":"MyNestedStack","ResourceIdentifier":<span>{</span>"StackId":"arn:aws:cloudformation:us-west-2:12345678910:stack/mystack/5b918d10-cd98-11ea-90d5-0a9cd3354c10"}}]'</code></code></pre>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p><code class="code">--resources-to-import</code> doesn't support inline YAML. The
                  requirements for escaping quotes in the JSON string vary depending on your
                  terminal. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-parameters-quoting-strings.html#cli-usage-parameters-quoting-strings-containing">Using quotation marks inside strings</a> in the
                     <em>AWS Command Line Interface User Guide</em>.</p></div></div>
            <p>Alternatively, you can use a file URL as input for the
                  <code class="code">--resources-to-import</code> option, as shown in the following
               example.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli ()--><code class="nohighlight">--resources-to-import <code class="replaceable">file://ResourcesToImport.txt</code></code></pre>
            <p>If successful, this command returns the following sample output.</p>
            <pre class="programlisting"><div class="code-btn-container"></div><!--DEBUG: cli (json)--><code class="json "><span>{</span>
    "Id": "arn:aws:cloudformation:us-west-2:12345678910:changeSet/ImportChangeSet/8ad75b3f-665f-46f6-a200-0b4727a9442e",
    "StackId": "arn:aws:cloudformation:us-west-2:12345678910:stack/MyParentStack/4e345b70-1281-11ef-b027-027366d8e82b"
}</code></pre>

         </li><li>
            <p>Review the change set to make sure the correct stack is being imported.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation describe-change-set --change-set-name <code class="replaceable">ImportChangeSet</code></code></pre>
         </li><li>
            <p>To initiate the change set and import the stack into the source parent stack, use
               the following <b>execute-change-set</b> command and replace the
               placeholder text. Any <a href="./cfn-console-create-stack.html#configure-stack-options">stack-level tags</a>
               are applied to imported resources at this time. On successful completion of the
               import operation <code class="code">(IMPORT_COMPLETE)</code>, the stack is successfully
               nested.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (cli)--><code class="nohighlight " data-source="content">aws cloudformation execute-change-set --change-set-name <code class="replaceable">ImportChangeSet</code></code></pre>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It's not necessary to run drift detection on the parent stack after this import
                  operation because the <code class="code">AWS::CloudFormation::Stack</code> resource is already
                  managed by AWS CloudFormation.</p></div></div>
         </li></ol></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./refactor-stacks.html">Moving resources between stacks</div><div id="next" class="next-link" accesskey="n" href="./import-resources-automatically.html">Automatically import AWS
   resources</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudFormation&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/resource-import-nested-stacks.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>